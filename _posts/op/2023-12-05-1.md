---
title: "Git 프로젝트 운영서버 반영 순서"
excerpt: ""

categories:
  - 리눅스 / 운영
tags:
  - []

permalink: /op/2023-11-28-1

toc: true
toc_sticky: true

date: 2023-11-28
last_modified_at: 2023-11-28
---

이 글에서는 main 브랜치에 커밋을 Cherry-Pick으로 병합합니다.  
Cherry-Pick 할 커밋이 너무 많고, 동기화해도 되는 브랜치면 통째로 Merge 하는 것도 방법입니다.

---

## Git 프로젝트 운영서버 반영 순서

1) fetch 하여 원격 저장소에 신규 커밋이 있는지 확인합니다.  
2) 신규 커밋이 있으면 pull 받고, 동기화 시켜줘야 하는 브랜치에 Cherry-Pick 하여 반영합니다.  
3) 내가 운영에 반영할 소스를 현재 작업 중 브랜치 (feature 또는 개인 브랜치) 에서 커밋 후 push 합니다.  
4) 충돌 및 유실 방지를 위해, 반영하면 안 되는 현재 작업 중 소스를 stash 하여 보관합니다.  
5) develop 브랜치로 checkout 하여 이동하고 이전 브랜치에서 한 커밋을 Cherry-Pick 하여 가져옵니다.  
6) 로컬에서 실행하여 테스트하고 정상적인지 확인합니다.  
7) 개발서버 백업 폴더에 오늘 날짜 폴더를 생성하고 FTP로 개발서버 소스를 그대로 내려받아 백업합니다.  
8) develop 브랜치의 소스를 빌드 후 개발서버에 반영하고, 백엔드 수정이 있다면 재기동합니다.  
9) 개발서버에서 테스트하고 기획자에게도 테스트 요청 후 검수 결과를 기다립니다.  
10) 검수 완료되면 develop 브랜치에 Cherry-Pick 했던 커밋을 push 하고, 기획자와 운영 반영 시간을 협의합니다.  
11) main (운영서버용) 브랜치로 checkout 하여 이동하고 develop 브랜치에 한 커밋을 Cherry-Pick 하여 가져옵니다.  
12) main 브랜치의 소스를 개발 빌드 후 개발서버에 반영하고, 백엔드 수정이 있다면 재기동합니다.  
13) 운영 반영 전까지 개발서버에서 최대한 테스트하여 정상적인지 확인합니다.  
14) 운영서버 백업 폴더에 오늘 날짜 폴더를 생성하고 FTP로 운영서버 소스를 그대로 내려받아 백업합니다.  
15) main 브랜치의 소스를 운영 빌드 후 운영서버에 반영하고, 백엔드 수정이 있다면 재기동합니다.  
16) feature 또는 개인 브랜치로 checkout 하여 이동하고 unstash 하여 작업 중이던 소스를 복구합니다.


개발서버 반영용 gev 브랜치와 운영서버 반영용 main 브랜치 분리는 필수입니다.
작업 완료 소스는 dev 브랜치 커밋 후 dev 브랜치에서 war 빌드하여 개발서버 반영합니다.
기획자 검수 후 main 브랜치에 해당 커밋만 체리픽하고 main 브랜치에서 war 빌드하여 운영서버 반영합니다.
dev 브랜치에서 작업 중, 운영 반영용 war 빌드는 git stash로 소스 백업하고 main 브랜치로 이동 후 해야 합니다.
---
title: "웹 취약점 점검 결과 이행 조치 방법"
excerpt: ""

categories:
  - 리눅스 / 운영
tags:
  - []

permalink: /op/2025-02-17-1

toc: true
toc_sticky: true

date: 2025-02-17
last_modified_at: 2025-02-17
---

사내 정보보안팀에서 제공한 웹 취약점 점검 결과보고서를 통해 취약점 조치를 진행합니다.

---

## 웹 취약점 점검도구
- Burp-Suite : 프록시 툴
- OWASP-ZAP : 웹 애플리케이션 취약점 스캔 및 자동화 공격도구

---

## 웹 취약점 점검 항목

### 크로스 사이트 스크립팅 - XSS
<mark>취약점 발생 예시</mark>  
공지사항 등록 시, 에디터에 아래의 크로스 사이트 스크립트 공격 구문 입력 후 등록이 가능한 경우입니다.
```
<script>alert(document.cookie)</script>
```
공지사항 상세 보기 시 alert이 실행되며, 사용자 쿠키를 탈취하여 도용하거나 악성코드 사이트로 Redirect 할 수 있습니다.  
사이트의 게시판, 1:1 문의, URL 등에서 사용자 입력 값이 실행되지 않도록 검증 및 치환 조치가 필요합니다.

<mark>취약점 조치 방법</mark>  
사용자가 <, >, &, "," 등 입력 시 Java에서 DB 등록 전 &lt, &rgt, &amp 등으로 치환합니다.  
```
public static String clearXSSCustom(String value) {
		if (value == null || value.trim().equals("")) {
			return "";
		}

		String returnValue = value;

		returnValue = returnValue.replaceAll("&", "&amp;");
		returnValue = returnValue.replaceAll("<", "&lt;");
		returnValue = returnValue.replaceAll(">", "&gt;");
		return returnValue;
	}
```
위와 같은 공통 유틸 함수를 만들어서 치환할 수 있습니다.

### 중요정보 노출 - 개인정보 평문전송
<mark>취약점 발생 예시</mark>  
로그인 시 Burp-Suite 스캐닝 툴로 요청 패킷 확인하면 ID, PW가 암호화되지 않고 그대로 노출되는 경우입니다.  
중요정보에 대해서는 반드시 SSL 등의 암호화 통신을 사용하여 도청 위험을 제거해야 합니다.  
암호화 전송 시 프로토콜 설계의 결함이 있는 SSLv2, SSLv3, TLSv1.0, TLSv1.1은 비활성화 설정해야 합니다.  
TLSv1.2 이상 사용을 권장한다고 합니다.

SSL 적용 시 SSL 인증서를 구매해서 발급하고 설정해야 합니다.  
멀티 도메인 인증서 (*.도메인.co.kr) 를 구매하면, 하나의 인증서로 여러 도메인에 적용할 수 있습니다.  
현재 스테이징 서버, 운영서버는 디딤365 업체에서 관리하므로 인증서 적용을 요청하였습니다.

### 중요정보 노출 - 에러메세지를 통한 정보노출
<mark>취약점 발생 예시</mark>  
사이트 URL 하위 존재하지 않는 페이지 접속 시도 시 HTTP 405 에러가 발생하는 경우입니다.  
해당 페이지에서 서버 종류 및 버전 정보가 노출되어서 개선이 필요합니다.

<mark>취약점 발생 재현 방법</mark>  
포스트맨으로 허용되지 않는 DELETE 같은 메소드 요청 시 405 에러가 발생됩니다.

<mark>취약점 조치 방법</mark>  
400~500번대 에러 코드에 대해 별도로 생성한 에러 페이지로 Redirect 되도록 설정하면 됩니다.
```
<error-page>
  <error-code>404</error-code>
  <location>/code404.jsp</location>
</error-page>

<error-page>
  <error-code>405</error-code>
  <location>/code405.jsp</location>
</error-page>

<error-page>
  <error-code>500</error-code>
  <location>/code500.jsp</location>
</error-page>
```
위와 같이, 프로젝트 WEB-INF 폴더 web.xml 파일에 에러코드에 대한 에러페이지를 설정합니다.  
src/main/webapp 폴더가 웹 애플리케이션의 루트 경로 (/) 입니다.  
error-page 하나당 한 개의 error-code만 인식합니다.

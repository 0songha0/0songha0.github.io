---
title: "카프카 쉘 스크립트 CLI 종류 및 사용법"
excerpt: ""

categories:
  - Kafka
tags:
  - []

permalink: /kafka/2025-05-02-1

toc: true
toc_sticky: true
 
date: 2025-05-02
last_modified_at: 2025-05-02
---

## 카프카 CLI 종류

Kafka CLI 도구는 카프카 설치 시 bin 폴더에 포함된 쉘 스크립트 (.sh 또는 .bat) 실행 파일입니다.  
카프카 클러스터 운영 및 관리 기능들을 CLI (Command Line Interface) 형태로 제공합니다.

<table class="table_2_left">
  <tbody>
    <tr>
      <td>kafka-server-start.sh</td>
      <td>카프카 브로커 실행</td>
    </tr>
    <tr>
      <td>kafka-server-stop.sh</td>
      <td>카프카 브로커 종료</td>
    </tr>
    <tr>
      <td>zookeeper-server-start.sh</td>
      <td>주키퍼 서버 실행</td>
    </tr>
    <tr>
      <td>zookeeper-server-stop.sh</td>
      <td>주키퍼 서버 종료</td>
    </tr>
    <tr>
      <td>kafka-topics.sh</td>
      <td>토픽 생성, 삭제, 조회, 설정 변경 등 관리</td>
    </tr>
    <tr>
      <td>kafka-console-producer.sh</td>
      <td>터미널에서 메시지를 입력하고 전송하는 프로듀서 실행</td>
    </tr>
    <tr>
      <td>kafka-console-consumer.sh</td>
      <td>터미널에서 메시지를 실시간으로 읽는 컨슈머 실행</td>
    </tr>
    <tr>
      <td>kafka-consumer-groups.sh</td>
      <td>컨슈머 그룹 상태 조회, 오프셋 이동 등</td>
    </tr>
    <tr>
      <td>kafka-configs.sh</td>
      <td>사용자/브로커/토픽 등 설정값 변경</td>
    </tr>
    <tr>
      <td>kafka-acls.sh</td>
      <td>ACL 설정 (접근 제어)</td>
    </tr>
    <tr>
      <td>kafka-reassign-partitions.sh</td>
      <td>파티션 재할당 작업<br>
      <br>특정 브로커에 리터 파티션이 몰리는 경우 사용하면 좋은 명령어입니다.
      <br>리더 파티션을 각 브로커에 균등하게 재분배하여 네트워크 통신으로 인한 리소스 부하를 분산합니다.
      </td>
    </tr>
    <tr>
      <td>kafka-preferred-replica-election.sh</td>
      <td>선호 리더 선출 실행</td>
    </tr>
    <tr>
      <td>kafka-run-class.sh</td>
      <td>임의의 Kafka 클래스 실행 (고급용)</td>
    </tr>
    <tr>
      <td>kafka-verifiable-consumer.sh</td>
      <td>테스트용 컨슈머 (정합성 테스트)</td>
    </tr>
    <tr>
      <td>kafka-verifiable-producer.sh</td>
      <td>테스트용 프로듀서 (정합성 테스트)</td>
    </tr>
    <tr>
      <td>connect-standalone.sh</td>
      <td>커넥트 단일 모드 실행</td>
    </tr>
    <tr>
      <td>connect-distributed.sh</td>
      <td>커넥트 클러스터 모드 실행</td>
    </tr>
    <tr>
      <td>kafka-producer-perf-test.sh</td>
      <td>프로듀서 성능 테스트</td>
    </tr>
    <tr>
      <td>kafka-consumer-perf-test.sh</td>
      <td>컨슈머 성능 테스트</td>
    </tr>
    <tr>
      <td>kafka-storage.sh</td>
      <td>로그 디렉터리 포맷 및 검증</td>
    </tr>
    <tr>
      <td>kafka-metadata-shell.sh</td>
      <td>메타데이터 수동 조회 (고급 기능)</td>
    </tr>
  </tbody>
</table>

---

## 카프카 토픽 관련 CLI

### 토픽 생성
```
-- 필수 옵션만 포함하여 토픽 생성
kafka-topics.sh --create --bootstrap-server localhost:9092 --topic 토픽명

-- 파티션 개수, 복제 개수, 리텐션 주기 지정하여 토픽 생성
kafka-topics.sh --create --bootstrap-server localhost:9092 --topic 토픽명 --partitions 3 --replication-factor 2 --config retention.ms=172800000
```

### 토픽 리스트 확인
```
kafka-topics.sh --bootstrap-server localhost:9092 --list
```
로컬 카프카 브로커에 생성된 토픽 이름 리스트를 출력합니다.  
--bootstrap-server 옵션 추가 시, 카프카 클러스터 내 브로커 1대에 요청합니다.

### 토픽 설정 확인
```
kafka-topics.sh --bootstrap-server localhost:9092 --topic 토픽명 --describe
```
토픽에 설정된 옵션 (파티션 개수, 복제 개수, 세그먼트 크기 등) 을 확인할 수 있습니다.  
각 파티션의 리더 파티션과 복제본이 위치한 브로커 ID, ISR 정보도 알 수 있습니다.

### 토픽 파티션 개수 변경
```
kafka-topics.sh --bootstrap-server localhost:9092 --topic 토픽명 --alter --partitions 4
```
한번 늘린 파티션 개수는 줄일 수 없으므로, 신중하게 늘려야 합니다.

### 토픽 옵션 추가
```
kafka-topics.sh --bootstrap-server localhost:9092 --topic 토픽명 --alter --add-config min.insync.replicas=2
```
토픽에 min.insync.replicas (ISR 최소 개수) 옵션을 추가합니다.  
프로듀서 데이터 전송이 성공하려면 최소 몇 개의 복제본이 동기화 상태여야 하는지 정의합니다.  
min.insync.replicas=2이고 프로듀서 설정이 acks=all인 경우,  
ISR이 1개로 줄어들면 해당 토픽에 프로듀서 메시지 전송이 실패합니다.

---

## 카프카 브로커 관련 CLI

### 브로커 설정 확인
```
kafka-configs.sh --bootstrap-server localhost:9092 --broker 브로커ID --all --describe
```
특정 브로커에 설정된 옵션 값들을 모두 확인할 수 있습니다.

---

## 카프카 프로듀서 관련 CLI

### 토픽 메시지 값 전송
```
kafka-console.producer.sh --bootstrap-server localhost:9092 --topic 토픽명
```
>가 나오면, 엔터로 구분하여 메시지 키가 null인 메시지 값을 여러개 보낼 수 있습니다.  
메시지 키가 null인 경우, 라운드 로빈 방식으로 전송하여 여러 파티션에 고르게 분배됩니다.

### 토픽 메시지 키-값 전송
```
kafka-console.producer.sh --bootstrap-server localhost:9092 --topic 토픽명 --property "parse.key=true" --property "key.separator=:"
```
>가 나오면, 엔터로 구분하여 메시지 키:값 레코드를 여러개 보낼 수 있습니다.  
메시지 키는 동일한 파티션 매핑, 메시지 순서 보장★, 데이터 그룹화에 사용되는 값입니다.

---

## 카프카 컨슈머 관련 CLI

### 토픽 메시지 값 조회
```
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic 토픽명 --from-beginning
```
--from-beginning 옵션으로 토픽에 저장된 가장 처음 메시지부터 모든 값을 순차 출력합니다.  
Ctrl + C로 실시간 보기를 나갈 수 있습니다.

### 토픽 메시지 키-값 조회
```
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic 토픽명 --property parse.key=true --property key.separator="-" --from-beginning
```
토픽에 저장된 모든 메시지 키-값을 순차 출력합니다.

### 토픽 메시지 최대 N개 조회
```
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic 토픽명 --from-beginning --max-messages 1
```
토픽에 저장된 모든 메시지 중, 가장 처음부터 최대 1개의 메시지만 출력하는 예시입니다.

### 특정 파티션 메시지 조회
```
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic 토픽명 --partition 2 --from-beginning
```
2번 파티션에 저장된 메시지만 출력하는 예시입니다.  

### 컨슈머 그룹 지정하여 메시지 조회
```
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic 토픽명 --group 컨슈머그룹명 --from-beginning
```
지정된 컨슈머 그룹에 속한 컨슈머가 메시지를 처음부터 마지막으로 커밋된 오프셋까지 순차적으로 읽습니다.  
입력한 컨슈머그룹명이 없으면 새로 만들어집니다.  
컨슈머 그룹이 어느 메시지(레코드)까지 읽었는지는 __consumer_offsets 토픽에 저장됩니다.

---

## 카프카 컨슈머 그룹 관련 CLI

작성중
